function setSortableList(e,t,o,a){var i=new List(e,{valueNames:t,page:500});i.sort(o,{order:a})}function instantiateCKEditor(e){return window.CKEDITOR&&window.CKEDITOR.dom?(CKEDITOR.replace(e,{customConfig:"",language:"fr",toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"links",groups:["links"]},{name:"paragraph",groups:["list"]},{name:"insert",groups:["insert"]}],removePlugins:"base64image",removeButtons:"Cut,Copy,Undo,Redo,Strike,Subscript,Superscript,Anchor",removeDialogTabs:"link:advanced",pasteFromWordPromptCleanup:!1,pasteFromWordRemoveStyles:!0,pasteFromWordRemoveFontStyles:!0,pasteFromWordNumberedHeadingToList:!0}),e):!1}function setRevealFormNewPage(e,t,o,a){o="undefined"!=typeof o?"undefined"!=typeof a&&Boolean(a)?instantiateForumCKEditor(o):instantiateCKEditor(o):!1,Foundation.utils.S("#"+e).submit(function(e){o&&CKEDITOR.instances[o].updateElement(),e.preventDefault();var a=$(this),i=Foundation.utils.S("#"+t);$.post(a.attr("action"),a.serialize()).done(function(e){var t=$.parseHTML(e);$(t).find(".error").length?(i.empty().html(e),revealInit(i)):(i.foundation("reveal","close"),document.location.href=e)})})}function revealFormOnSubmitBehavior(e){var t=e.parents(".reveal-modal").children("h2");t.html(t.text()+'<i class="fa fa-refresh fa-spin"></i>'),e.find('[type="submit"]').prop("disabled",!0)}function revealInit(e){var t=e.find("input[type=text], input[type=radio], input[type=checkbox], textarea, select").filter(":visible:first");t.length>0&&t.focus(),e.find("h2 > a.close-reveal-modal").attr("title",CLOSE_REVEAL_TITLE),e.find("form:not(.no_reveal_action)").submit(function(e){revealFormOnSubmitBehavior($(this))})}function removePlayerOnClose(){Foundation.utils.S("#reveal-main").on("closed",function(){$(this).children(".flex-video").remove()})}function removeErrorImages(e){Foundation.utils.S("#"+e+" img.primo_img").on("error",function(e){$(this).remove()})}function _alertBoxRemover(e,t){t.hasClass("alert")||t.delay(5e3).slideUp(function(){e.remove()}),t.on("click","> a.close",function(t){t.preventDefault(),t.stopPropagation(),e.slideUp(function(){$(this).remove()})})}function setAlertBox(e,t,o){var a="";o&&(a+="<h3>"+o+"</h3>"),a+=t+'<a class="close"></a>';var i=$("<div>",{id:"js-alert_box","class":"small-12 columns"}),n=$("<div>",{"class":"alert-box radius "+e,"data-alert":"data-alert",html:a,css:{display:"none"}});i.prepend(n),Foundation.utils.S("main").prepend(i),n.slideDown(),_alertBoxRemover(i,n)}function alterAlertBox(){$box=Foundation.utils.S(".alert-box"),_alertBoxRemover($box.parent("div"),$box)}function scrollerDisplay(){Foundation.utils.S("#breadcrumb").isOnScreen()?Foundation.utils.S(".scroll-top").fadeOut("fast"):Foundation.utils.S(".scroll-top").fadeIn("slow")}function instantiateForumCKEditor(e){return window.CKEDITOR&&window.CKEDITOR.dom?(CKEDITOR.replace(e,{customConfig:"",language:"fr",toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"links",groups:["links"]},{name:"paragraph",groups:["blocks"]},{name:"insert",groups:["insert"]}],removeButtons:"Cut,Copy,Undo,Redo,Strike,Subscript,Superscript,Anchor",removeDialogTabs:"link:advanced",pasteFromWordPromptCleanup:!1,pasteFromWordRemoveStyles:!0,pasteFromWordRemoveFontStyles:!0,pasteFromWordNumberedHeadingToList:!0}),e):!1}function setForumQuickReplyForm(){var e=Foundation.utils.S("#js-forum-quickreply");instantiateForumCKEditor("js-forum-quickreply"),e.closest("form").submit(function(t){var o=$(this);CKEDITOR.instances["js-forum-quickreply"].updateElement(),buffer=e.val(),""===$(buffer).text().trim()&&(t.preventDefault(),$field=e.parent(".field"),$field.children(".fieldErrorBox").length||$('<div class="fieldErrorBox hide">Champ obligatoire</div>').prependTo($field).show("slow"))})}function setForumSearchForm(){Foundation.utils.S("#js-forum-search").submit(function(e){var t=$(this);Boolean(t.find('input[type="text"]').first().val().trim())||(e.preventDefault(),t.children(".fieldErrorBox").length||$('<div class="fieldErrorBox hide">Champ obligatoire</div>').prependTo(t).show("slow"))})}function cleanForumSearchResults(){Foundation.utils.S("#searchResults dd span").each(function(e){var t=$(this).html(),o=t.lastIndexOf("blockquote");o>0&&$(this).html(t.substr(o+14))})}function setPlanChapterDisclosure(e){var t=Foundation.utils.S("#course_plan-plan li.branch:not(.element)"),o=Foundation.utils.S("#course_plan .legend_bar"),a=o.find(" > li:first-child > a"),i=o.find(" > li:last-child > a");e?(a.addClass("disabled"),i.removeClass("disabled"),t.removeClass("collapsed").addClass("expanded")):(i.addClass("disabled"),a.removeClass("disabled"),t.removeClass("expanded").addClass("collapsed"))}function setPlanChapterBehaviors(e){var t=Foundation.utils.S("#course_plan-plan"),o=Foundation.utils.S("#course_plan .legend_bar"),a=o.find(" > li:first-child > a"),i=o.find(" > li:last-child > a");e&&Foundation.utils.S("#course_plan").find(".legend_bar").on("click","li:not(:nth-child(2)) > a",function(e){e.preventDefault(),e.stopPropagation(),$(this).hasClass(".disabled")||($(this).parent("li").is(":first-child")?setPlanChapterDisclosure(!0):$(this).parent("li").is(":last-child")&&setPlanChapterDisclosure(!1),$(this).blur())}),t.find(".js-disclose").on("click",function(){$(this).closest("li").toggleClass("collapsed expanded"),a.removeClass("disabled"),i.removeClass("disabled"),t.find(".collapsed:visible").length||a.addClass("disabled"),t.find(".expanded:visible").length||i.addClass("disabled")}),t.find(".elemtitre").hover(function(){$(this).parent("li").addClass("outlineTitleContainer")},function(){$(this).parent("li").removeClass("outlineTitleContainer")})}function setConditionalFormat(e,t,o){o="undefined"!=typeof o?o:"tbody",$(o+" td:nth-child("+e+")").each(function(){var e=parseFloat($(this).text().replace(",","."));switch(!0){case 0===e:$(this).addClass("zero_score");break;case.25*t>e:$(this).addClass("firstQuarter");break;case.5*t>e:$(this).addClass("secondQuarter");break;case.75*t>e:$(this).addClass("thirdQuarter");break;case t>e:$(this).addClass("lastQuarter");break;default:$(this).addClass("max_score")}})}function readSwitcher(){var e=Foundation.utils.S("#course_plan-plan");e.on("click","a.right",function(t){if(t.preventDefault(),t.stopPropagation(),!isRefreshing){isRefreshing=!0;var o=$(this),a=Foundation.utils.S("#js-update_title"),i=o.attr("href"),n=a.html();a.html(MSG_LOADING),e.fadeTo(200,.33,function(){$.get(i,function(t,i){o.children("i.fa").toggleClass("fa-check-square-o fa-square-o"),e.fadeTo(200,1,function(){a.html(n),isRefreshing=!1})})})}})}$.fn.isOnScreen=function(){var e=$(window),t={top:e.scrollTop(),left:e.scrollLeft()};t.right=t.left+e.width(),t.bottom=t.top+e.height();var o=this.offset();return o.right=o.left+this.outerWidth(),o.bottom=o.top+this.outerHeight(),!(t.right<o.left||t.left>o.right||t.bottom<o.top||t.top>o.bottom)};var CKEDITOR_BASEPATH="/++resource++jalon.theme.javascript/ckeditor/",MSG_LOADING='<i class="fa fa-spin fa-refresh"></i>'+MSG_LOADING_TEXT,MSG_LOADING_OK='<i class="fa fa-thumbs-o-up"></i>'+MSG_LOADING_OK_TEXT,isRefreshing=!1;$(document).foundation({dropdown:{align:"left"},reveal:{animation:"fade",animation_speed:200,close_on_background_click:!0},tab:{callback:function(e){var t=e.parent("ul").parent("div").attr("id"),o=e.children("a").attr("href").substr(1);localStorage&&localStorage[t]!==o&&(localStorage[t]=o)}},tooltip:{disable_for_touch:!0,touch_close_text:MSG_TAP2CLOSE_TEXT},topbar:{custom_back_text:!1,mobile_show_parent_link:!1}}),$(document).ready(function(){$(document).ajaxError(function(e,t,o,a){Foundation.utils.S("[data-reveal]").foundation("reveal","close"),setAlertBox("alert","Une erreur est survenue",a)}),$(document).on("opened.fndtn.reveal","[data-reveal]:not(#reveal-connect)",function(){revealInit($(this))}),Foundation.utils.S(window).scroll(function(){scrollerDisplay()}),Foundation.utils.S("body > footer").on("click",".scroll-top",function(e){e.preventDefault(),e.stopPropagation(),Foundation.utils.S("#breadcrumb").isOnScreen()||Foundation.utils.S("html, body").animate({opacity:.8},"fast").animate({scrollTop:0},"slow").animate({opacity:1},"fast")})});