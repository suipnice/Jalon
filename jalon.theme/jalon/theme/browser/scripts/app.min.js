function setSortableList(t,e,o,i){var n=new List(t,{valueNames:e,page:500});n.sort(o,{order:i})}function instantiateCKEditor(t){return window.CKEDITOR&&window.CKEDITOR.dom?(CKEDITOR.replace(t,{customConfig:"",language:"fr",toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list"]},{name:"insert",groups:["insert"]}],removePlugins:"image,elementspath",removeButtons:"Strike,Subscript,Superscript,Anchor"}),t):!1}function setRevealFormNewPage(t,e,o,i){o="undefined"!=typeof o?"undefined"!=typeof i&&Boolean(i)?instantiateForumCKEditor(o):instantiateCKEditor(o):!1,Foundation.utils.S("#"+t).submit(function(t){o&&CKEDITOR.instances[o].updateElement(),t.preventDefault();var i=$(this),n=Foundation.utils.S("#"+e);$.post(i.attr("action"),i.serialize()).done(function(t){var e=$.parseHTML(t);$(e).find(".error").length?(n.empty().html(t),revealInit(n)):(n.foundation("reveal","close"),document.location.href=t)})})}function revealInit(t){var e=t.find("input[type=text], input[type=radio], input[type=checkbox], textarea, select").filter(":visible:first");e.length>0&&e.focus(),t.find("form:not(.no_reveal_action)").submit(function(t){var e=$(this).parents(".reveal-modal").children("h2");e.html(e.text()+'<i class="fa fa-refresh fa-spin"></i>'),$(this).find('[type="submit"]').prop("disabled",!0)})}function removePlayerOnClose(){Foundation.utils.S("#reveal-main").on("closed",function(){$(this).children(".flex-video").remove()})}function removeErrorImages(t){Foundation.utils.S("#"+t+" img.primo_img").on("error",function(t){$(this).remove()})}function _alertBoxRemover(t,e){e.hasClass("alert")||e.delay(5e3).slideUp(function(){t.remove()}),e.on("click","> a.close",function(e){e.preventDefault(),e.stopPropagation(),t.slideUp(function(){$(this).remove()})})}function setAlertBox(t,e,o){var i="";o&&(i+="<h3>"+o+"</h3>"),i+=e+'<a class="close"></a>';var n=$("<div>",{id:"js-alert_box","class":"small-12 columns"}),a=$("<div>",{"class":"alert-box radius "+t,"data-alert":"data-alert",html:i,css:{display:"none"}});n.prepend(a),Foundation.utils.S("main").prepend(n),a.slideDown(),_alertBoxRemover(n,a)}function alterAlertBox(){$box=Foundation.utils.S(".alert-box"),_alertBoxRemover($box.parent("div"),$box)}function scrollerDisplay(){Foundation.utils.S("#breadcrumb").isOnScreen()?Foundation.utils.S(".scroll-top").fadeOut("fast"):Foundation.utils.S(".scroll-top").fadeIn("slow")}function instantiateForumCKEditor(t){return window.CKEDITOR&&window.CKEDITOR.dom?(CKEDITOR.replace(t,{customConfig:"",language:"fr",toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"links",groups:["links"]},{name:"paragraph",groups:["blocks"]},{name:"insert",groups:["insert"]}],removePlugins:"image,elementspath",removeButtons:"Strike,Subscript,Superscript,Anchor",removeDialogTabs:"link:advanced"}),t):!1}function setForumQuickReplyForm(){var t=Foundation.utils.S("#js-forum-quickreply");instantiateForumCKEditor("js-forum-quickreply"),t.closest("form").submit(function(e){var o=$(this);CKEDITOR.instances["js-forum-quickreply"].updateElement(),buffer=t.val(),""===$(buffer).text().trim()&&(e.preventDefault(),$field=t.parent(".field"),$field.children(".fieldErrorBox").length||$('<div class="fieldErrorBox hide">Champ obligatoire</div>').prependTo($field).show("slow"))})}function setForumSearchForm(){Foundation.utils.S("#js-forum-search").submit(function(t){var e=$(this);Boolean(e.find('input[type="text"]').first().val().trim())||(t.preventDefault(),e.children(".fieldErrorBox").length||$('<div class="fieldErrorBox hide">Champ obligatoire</div>').prependTo(e).show("slow"))})}function cleanForumSearchResults(){Foundation.utils.S("#searchResults dd span").each(function(t){var e=$(this).html(),o=e.lastIndexOf("blockquote");o>0&&$(this).html(e.substr(o+14))})}function setConditionalFormat(t,e,o){o="undefined"!=typeof o?o:"tbody",$(o+" td:nth-child("+t+")").each(function(){var t=parseFloat($(this).text().replace(",","."));switch(!0){case 0===t:$(this).addClass("zero_score");break;case.25*e>t:$(this).addClass("firstQuarter");break;case.5*e>t:$(this).addClass("secondQuarter");break;case.75*e>t:$(this).addClass("thirdQuarter");break;case e>t:$(this).addClass("lastQuarter");break;default:$(this).addClass("max_score")}})}function readSwitcher(){var t=Foundation.utils.S("#course_plan-plan");t.on("click","a.right",function(e){if(e.preventDefault(),e.stopPropagation(),!isRefreshing){isRefreshing=!0;var o=$(this),i=Foundation.utils.S("#js-update_title"),n=o.attr("href"),a=i.html();i.html(MSG_LOADING),t.fadeTo(200,.33,function(){$.get(n,function(e,n){o.children("i.fa").toggleClass("fa-check-square-o fa-square-o"),t.fadeTo(200,1,function(){i.html(a),isRefreshing=!1})})})}})}$.fn.isOnScreen=function(){var t=$(window),e={top:t.scrollTop(),left:t.scrollLeft()};e.right=e.left+t.width(),e.bottom=e.top+t.height();var o=this.offset();return o.right=o.left+this.outerWidth(),o.bottom=o.top+this.outerHeight(),!(e.right<o.left||e.left>o.right||e.bottom<o.top||e.top>o.bottom)};var MSG_LOADING='<i class="fa fa-spin fa-refresh"></i>'+MSG_LOADING_TEXT,MSG_LOADING_OK='<i class="fa fa-thumbs-o-up"></i>'+MSG_LOADING_OK_TEXT,isRefreshing=!1;$(document).foundation({dropdown:{align:"left"},reveal:{animation:"fade",animation_speed:200,close_on_background_click:!0},tab:{callback:function(t){var e=t.parent("ul").parent("div").attr("id"),o=t.children("a").attr("href").substr(1);localStorage&&localStorage[e]!==o&&(localStorage[e]=o)}},tooltip:{disable_for_touch:!0,touch_close_text:MSG_TAP2CLOSE_TEXT},topbar:{custom_back_text:!1,mobile_show_parent_link:!1}}),$(document).ready(function(){$(document).ajaxError(function(t,e,o,i){Foundation.utils.S("[data-reveal]").foundation("reveal","close"),setAlertBox("alert","Une erreur est survenue",i)}),$(document).on("opened.fndtn.reveal","[data-reveal]:not(#reveal-connect)",function(){revealInit($(this))}),Foundation.utils.S(window).scroll(function(){scrollerDisplay()}),Foundation.utils.S("body > footer").on("click",".scroll-top",function(t){t.preventDefault(),t.stopPropagation(),Foundation.utils.S("#breadcrumb").isOnScreen()||Foundation.utils.S("html, body").animate({opacity:.8},"fast").animate({scrollTop:0},"slow").animate({opacity:1},"fast")})});