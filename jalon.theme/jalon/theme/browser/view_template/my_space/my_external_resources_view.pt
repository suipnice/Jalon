<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jalon.content">

<body>

<metal:core fill-slot="content"
            tal:define="my_view python:view.getMyExternalResourcesView(user)">

    <tal:condition condition="not:is_ajax">

    <tal:define define="breadcrumbs view/getBreadcrumbs">
    <metal:macro use-macro="context/breadcrumbs_macro/macros/breadcrumbs">
        Page d'affichage du fil d'ariane
    </metal:macro>
    </tal:define>

    <!-- L'attribut data-options permet d'éviter un bug à la fermeture du popup dans certaines conditions non vraiment définies… -->
    <div id="reveal-main" class="reveal-modal medium"
         data-reveal="data-reveal" data-options="close_on_background_click: true;"></div>

    <metal:macro use-macro="context/macro_reveal_messages/macros/reveal_no_deletion">
        Macro d'affichage des messages en reveal
    </metal:macro>

    <main class="row" role="main" aria-labelledby="page_title">

        <metal:macro use-macro="here/global_statusmessage_macro/macros/portal_message">Message de session</metal:macro>

        <nav class="show-for-medium-up medium-12 columns">
            <ul class="button-group expand radius even-2"
                tal:omit-tag="not:my_view/is_two_actions">
                <li tal:repeat="action my_view/item_adder_list"
                    tal:omit-tag="not:my_view/is_two_actions">
                    <a data-reveal-id="reveal-main" data-reveal-ajax="true"
                       tal:attributes="class action/action_css_class;
                                       href string:${context/absolute_url}/${action/action_link}">
                       <i tal:attributes="class action/action_icon"></i>
                       <tal:block tal:replace="action/action_name"
                                  i18n:translate=""/>
                    </a>
                </li>
            </ul>
        </nav>

        <metal:macro use-macro="context/my_space_tags_macro/macros/tags_section">
            Gestion des étiquettes
        </metal:macro>

        <section id="js-list-ressource" class="small-12 columns">

            <h2 id="js-update_title">
                <i class="fa fa fa-external-link"></i><tal:replace replace="context/Title" i18n:translate=""/>
            </h2>
            <div id="js-update_target"
                 tal:attributes="data-href string:${context/absolute_url}">
                <metal:macro use-macro="context/my_external_resources_list_macro/macros/my_external_resources_list">
                    Macro d'affichage de la liste des ressources externes
                </metal:macro>
            </div>
        </section>

    </main>

    <tal:block define="script string:setTagFilter()">
        <tal:jsBuffer define="addJsContent python:jsBuffer.addJS(script)" />
    </tal:block>

    </tal:condition>

    <tal:condition condition="is_ajax">
    <metal:macro use-macro="context/my_external_resources_list_macro/macros/my_external_resources_list">
        Macro d'affichage de la liste des fichiers
    </metal:macro>
    </tal:condition>

</metal:core>

</body>

</html>