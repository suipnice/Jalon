<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jalon.content">

<body>

<metal:main fill-slot="content"
            tal:define="tab request/tab | string:deposit;
                        mode_etudiant_request request/mode_etudiant | nothing;
                        my_view python:view.getWimsActivityView(user, mode_etudiant_request, tab, is_ajax);
                        mode_etudiant my_view/mode_etudiant">

<tal:condition condition="is_ajax">
    <h2>
        <tal:replace replace="context/Title"
                     i18n:translate=""/>
        <a class="close-reveal-modal"></a>
    </h2>
    <h3 class="texte_icone icone_consignes"
        i18n:translate="">Consigne</h3>
    <div tal:attributes="class my_view/instruction_class"
         tal:content="my_view/instruction_text"
         i18n:translate=""/>
    <a class="button expand success" 
       tal:attributes="href string:${my_view/wims_activity_link}/view"
       tal:condition="not:my_view/is_anonymous">
        <i class="fa fa-eye"></i>
        <tal:block i18n:translate="">Accéder à cette activité WIMS</tal:block>
    </a>
    <tal:condition condition="my_view/is_anonymous">
        <div class="panel radius warning text-center">
            <i class="fa fa-warning"></i>
            <strong i18n:translate="">Désolé, seul un utilisateur connecté peux participer aux activités d'un cours.</strong>
        </div>
        <a class="button expand"
           tal:define="page_quote python:context.jalon_quote(page)"
           tal:attributes="href string:${portal_url}/acl_users/credentials_cookie_auth/require_login?came_from=${page_quote}">
            <i class="fa fa-key"></i>
            <tal:block i18n:translate="">Se connecter pour accéder à cette activité WIMS</tal:block>
        </a>
    </tal:condition>
</tal:condition>

<tal:condition condition="not:is_ajax">
    <tal:define define="no_return python:context.checkCourseAuthorized(user, request)"/>
    <tal:define define="no_return python:context.insererConsultation(user, 'Cours', '')"/>
    
    <tal:define define="breadcrumbs view/getBreadcrumbs">
    <metal:macro use-macro="context/breadcrumbs_macro/macros/breadcrumbs">
        Page d'affichage du fil d'ariane
    </metal:macro>
    </tal:define>

    <div id="reveal-main" class="reveal-modal medium" 
         data-reveal="data-reveal" data-options="close_on_background_click: true;"></div>
    <div id="reveal-main_second" class="reveal-modal medium"
         data-reveal="data-reveal" data-options="close_on_background_click: true;"></div>
    <div id="reveal-main-large" class="reveal-modal large"
         data-reveal="data-reveal" data-options="close_on_background_click: true;"></div>

    <main class="row" role="main" aria-labelledby="page_title">

        <metal:macro use-macro="here/global_statusmessage_macro/macros/portal_message">
            Message de session
        </metal:macro>

        <div class="row"
             tal:define="message request/message | nothing"
             tal:condition="message">
            <metal:macro use-macro="context/macro_messages/macros/messages">
                encart d'affichage des messages de feedback
            </metal:macro>
        </div>

        <div class="small-12 columns text-center"
             tal:condition="my_view/is_anonymous">
            <div class="panel radius warning text-center">
                <i class="fa fa-warning"></i>
                <strong i18n:translate="">Désolé, seul un utilisateur connecté peux participer aux activités d'un cours.</strong>
            </div>
            <a tal:attributes="href my_view/came_from"
               class="showmore button">
               <i class="fa fa-key"></i>
               <tal:block i18n:translate="">Se connecter</tal:block>
            </a>
        </div>

        <tal:condition condition="not:my_view/is_anonymous">

        <section id="boite" class="medium-8 small-12 columns">
            <h1>
                <i class="fa fa-inbox no-pad"></i>
                <tal:replace replace="here/Title" />
            </h1>

        </section>
        </tal:condition>
    </main>

</tal:condition>

</metal:main>

</body>

</html>