<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="fr"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jalon.content">

<body>

<metal:main fill-slot="content"
            tal:define="errors options/state/getErrors | nothing;">

<!--
        Création d'une activité et d'exercice(s) WIMS par importation HotPotatoes
-->

<tal:define define="tab request/tab | nothing;
                    mode_etudiant request/mode_etudiant | nothing;">
    <tal:define define="breadcrumbs python:context.getCrumbs('import')"  tal:condition="not:is_ajax | nothing">
        <metal:macro use-macro="context/breadcrumbs_macro/macros/breadcrumbs">
            Page d'affichage du fil d'ariane
        </metal:macro>
        <metal:macro use-macro="here/global_statusmessage_macro/macros/portal_message">Message de session</metal:macro>
    </tal:define>

    <h2 tal:condition="is_ajax">
        <i class="fa fa-fw fa-level-down"></i>
        <tal:block i18n:translate="">Importer des exercices HotPotatoes</tal:block>
        <a class="close-reveal-modal"></a>
    </h2>

    <main class="row">
      <div class="small-12 columns">

        <h1 tal:condition="not:is_ajax">
            <i class="fa fa-fw fa-level-down"></i>
            <tal:block i18n:translate="">Importer des exercices HotPotatoes</tal:block>
        </h1>

        <div class="panel callout radius"
             i18n:translate="">
            Sélectionnez un fichier « .jqz », généré depuis un HotPotatoes V6 ou supérieur, pour importer son contenu JQuizz.
        </div>

        <form id="js-importActWIMS-form"
              tal:attributes="action string:${context/absolute_url}/${template/id}"
              enctype="multipart/form-data" method="POST">

            <div tal:define="error errors/file | nothing;
                             arch_class string:field"
                 tal:attributes="class python:context.test(error, 'error %s' % arch_class, arch_class)">

                <label for="file" class="formQuestion" i18n:translate="">Fichier JQuizz à importer</label>
                <div class="fieldErrorBox"
                     tal:condition="error" tal:content="error" />
                <input type="file" id="file" name="file"
                       required="required" />
            </div>

            <input type="hidden" name="form.submitted" value="1" />
            <input type="hidden" name="member_auth" tal:attributes="value user/getId" />

            <div class="formControls">
                <button type="submit" class="button small create"
                        name="submit">
                    <i class="fa fa-upload"></i>
                    <tal:block i18n:translate="">Importer</tal:block>
                </button>
            </div>

        </form>
        <script charset="UTF-8"
            tal:content="structure string:displayMessageOnSubmit('js-importActWIMS-form')"></script>
      </div>
    </main>
</tal:define>


</metal:main>

</body>

</html>