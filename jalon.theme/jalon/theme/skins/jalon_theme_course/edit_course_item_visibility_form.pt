<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jalon.content">

<body>

<metal:main fill-slot="content"
            tal:define="item_id request/item_id;
                        my_form python:context.getDisplayItemForm(item_id)">

    <h2>
        <i tal:attributes="class my_form/form_title_icon"></i>
        <tal:replace replace="my_form/form_title_text" i18n:translate=""/>
        <a class="close-reveal-modal"></a>
    </h2>

    <div class="panel warning radius"
         tal:condition="my_form/is_item_parent_title">
         <i class="fa fa-warning"></i><strong i18n:translate="">Attention :</strong>
         <tal:block i18n:translate="">le titre du plan "<strong tal:content="my_form/item_parent_title" />" contenant cet élément est actuellement masqué. Afficher cet élément affichera automatiquement tous les titres le contenant, jusqu'à la racine du plan.</tal:block>
    </div>

    <div tal:attributes="class my_form/help_css"
         tal:content="my_form/help_text"
         i18n:translate=""/>

<tal:condition condition="my_form/is_display_allowed">
    <div class="panel warning radius"
         tal:condition="my_form/wims_help_text"
         tal:content="structure my_form/wims_help_text"
         i18n:translate="">
    </div>

    <div class="text-center"
         tal:content="my_form/text_title_directly"/>

    <form method="POST"
          tal:attributes="action string:${context/absolute_url}/edit_course_item_visibility_script">

        <input type="hidden" name="item_id" tal:attributes="value item_id"/>
        <input type="hidden" name="date-affichage-now" value="now"/>
        <input type="hidden" name="item_property_name" tal:attributes="value my_form/item_property_name"/>

        <input type="hidden" name="is_item_title" value="true"
               tal:condition="my_form/is_item_title"/>
        <input type="hidden" name="item_parent_title_id"
               tal:attributes="value my_form/item_parent_title_id"
               tal:condition="my_form/is_item_parent_title"/>

        <div class="formControls">
            <button type="submit"
                    tal:attributes="class my_form/form_button_css">
                <i tal:attributes="class my_form/form_title_icon"></i>
                <tal:replace replace="my_form/form_button_directly_text" i18n:translate=""/>
            </button>
        </div>
    </form>

  <tal:condition condition="my_form/is_delay_allowed">
    <div class="text-center"
         tal:content="my_form/text_title_lately"/>

    <form method="POST"
          tal:attributes="action string:${context/absolute_url}/edit_course_item_visibility_script">

        <div class="formControls">
            <input id="datetime" name="datetime" type="datetime"
                   required="required" pattern="[0-9]{4}/[0-9]{2}/[0-9]{2} [0-9]{2}:[0-9]{2}"
                   tal:attributes="value my_form/item_date" />
        </div>

        <input type="hidden" name="item_id" tal:attributes="value item_id"/>
        <input type="hidden" name="item_property_name" tal:attributes="value my_form/item_property_name"/>

        <input type="hidden" name="is_item_title" value="true"
               tal:condition="my_form/is_item_title"/>
        <input type="hidden" name="item_parent_title_id"
               tal:attributes="value my_form/item_parent_title_id"
               tal:condition="my_form/is_item_parent_title"/>

        <div class="formControls">
            <button type="submit"
                    tal:attributes="class my_form/form_button_css">
                <i tal:attributes="class my_form/form_title_icon"></i>
                <tal:replace replace="my_form/form_button_lately_text" i18n:translate=""/>
            </button>
        </div>

    </form>
  </tal:condition>
    <script charset="UTF-8"
            tal:content="structure string:setDateTimePicker('datetime')"></script>
</tal:condition>

</metal:main>

</body>

</html>