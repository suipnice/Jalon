<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jalon.content">

<body>

<metal:content-core fill-slot="content"
                    tal:define="mode_etudiant request/mode_etudiant;
                                annonces python:context.getAnnonces(user, mode_etudiant, True)['listeAnnonces']">

    <h2>
        <i class="fa fa-bullhorn"></i>
        <tal:block i18n:translate="">Liste des annonces</tal:block>
        <a class="close-reveal-modal"></a>
    </h2>

    <div class="panel callout radius"
         tal:condition="not:annonces"
         i18n:translate="">
        Il n'y a aucune annonce pour ce cours.
    </div>

    <table id="js-listAnnonce"
           tal:condition="annonces">

        <thead>
            <tr>
                <th data-sort="date" class="sort has-tip"
                    data-tooltip title="Trier selon la date de l'annonce"
                    i18n:attributes="title">
                    <span>
                        <i class="fa fa-sort"></i>
                        <i class="fa fa-sort-asc"></i>
                        <i class="fa fa-sort-desc"></i>
                        <tal:block i18n:translate="">Date</tal:block>
                    </span>
                </th>
                <th data-sort="title" class="sort has-tip" data-tooltip title="Trier selon le titre de l'annonce"
                    i18n:attributes="title">
                    <span>
                        <i class="fa fa-sort"></i>
                        <i class="fa fa-sort-asc"></i>
                        <i class="fa fa-sort-desc"></i>
                        <tal:block i18n:translate="">Annonce</tal:block>
                    </span>
                </th>
            </tr>
        </thead>

        <tbody class="list">
            <tr tal:repeat="annonce annonces">
                <td class="date">
                    <span class="hide"
                          tal:content="python:context.getLocaleDate(annonce.modified(), '%Y%m%d%H%M%S')" />
                    <span class="label bkgrnd"
                          tal:content="python:context.getLocaleDate(annonce.modified())" />
                </td>
                <td class="title">
                    <strong tal:content="annonce/title" />
                    <span tal:content="structure annonce/getDescriptionAff" />
                </td>
            </tr>
        </tbody>

    </table>

    <script charset="UTF-8"
            tal:content="structure string:setSortableList('js-listAnnonce',['date','title'],'date','desc')">
    </script>

</metal:content-core>

</body>

</html>