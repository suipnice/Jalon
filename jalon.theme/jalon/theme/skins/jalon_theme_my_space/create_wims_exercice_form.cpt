<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jalon.content">

<body>

<metal:content-core fill-slot="content"
                    tal:define="errors options/state/getErrors | nothing">
    <tal:comment replace="nothing">
        <!-- create_wims_exercice_form.cpt : formulaire de creation d'un exercice WIMS -->
    </tal:comment>

    <h2>
        <tal:block i18n:translate="">Créer un exercice Wims</tal:block>
        <a class="close-reveal-modal"></a>
    </h2>

    <form id="js-wimsExerciceCreator" method="POST"
          tal:attributes="action string:${context/absolute_url}/${template/id};
                          data-success_msg_pre string:L'exercice Wims;
                          data-success_msg_post string:a été crée."
          i18n:attributes="data-success_msg_pre; data-success_msg_post">

        <div id="archetypes-fieldname-title"
             tal:define="error errors/title | nothing"
             tal:attributes="class python:context.test(error, 'error field', 'field')">
            <label for="title" class="formQuestion">
                <tal:block i18n:translate="">Titre</tal:block>
                <span id="title_wims_help" class="formHelp texte_icone icone_information">
                    <tal:block i18n:translate="">Un titre d'exercice est limité à 40 caractères.</tal:block><br />
                    <tal:block i18n:translate="">Attention : les caractères spéciaux</tal:block> (&lt; " &gt; { } ( ) $ &amp; …)
                    <tal:block i18n:translate="">seront supprimés ou remplacés par des espaces.</tal:block>
                </span>
            </label>
            <div class="fieldErrorBox"
                 tal:condition="error" tal:content="error" />
            <input type="text" maxlength="40" size="30"
                   id="title" name="title"
                   required="required"
                   placeholder="Saisie obligatoire" i18n:attributes="placeholder"
                   tal:attributes="value request/title | nothing" />
        </div>

        <div id="archetypes-fieldname-modele"
             tal:define="error errors/modele | nothing;
                         arch_class string:field ArchetypesSelectionWidget;"
             tal:attributes="class python:context.test(error, 'error %s' % arch_class, arch_class)">

            <label for="modele" class="formQuestion">
                <tal:block i18n:translate="">Modèle</tal:block>
                <span id="modele_help" class="formHelp texte_icone icone_information"
                      i18n:translate="">Chaque modèle permet de composer un exercice complètement différent.</span>
            </label>
            <div class="fieldErrorBox"
                 tal:condition="error" tal:content="error" />
            <select id="modele" name="modele">
                <optgroup label="1 Modeles simples">
                    <option value="qcmsimple">Question simple</option>
                    <option value="equation">Equation</option>
                    <option value="texteatrous">Texte a trous</option>
                    <option value="marqueruntexte">Marquer un texte</option>
                    <option value="marquerparpropriete">Marquer par propriete</option>
                    <option value="questiontextuelletolerante">Question textuelle tolerante</option>
                    <option value="taperlemotassocie">Taper le mot associe</option>
                </optgroup>
                <optgroup label="2 : Modeles a base de 'glisser/deposer'">
                    <option value="reordonner">Reordonner</option>
                    <option value="correspondance">Correspondance</option>
                    <option value="classerparpropriete">Classer par propriete</option>
                </optgroup>
                <optgroup label="3 : Modeles avances">
                    <option value="vraifauxmultiples">Vrai / Faux multiples</option>
                    <option value="texteatrousmultiples">Textes a trous multiples</option>
                    <option value="exercicelibre">Exercice libre (mode brut)</option>
                    <option value="qcmsuite">QCM à la suite</option>
                </optgroup>
                <optgroup label="4 : Modeles Tiers">
                    <option value="externe">Exercice de la base WIMS</option>
                </optgroup>
            </select>
        </div>

        <input type="hidden" name="form.submitted" value="1"/>
        <input type="hidden" name="validate_key" value="create_wims_exercice"/>
        <input type="hidden" name="member_id"
                             tal:attributes="value user/getId"/>

        <div class="formControls">
            <button type="submit" class="button small"
                    name="submit">
                <i class="fa fa-arrow-circle-right"></i>
                <tal:block i18n:translate="">Étape suivante</tal:block>
            </button>
        </div>

    </form>

    <script charset="UTF-8"
            tal:content="structure string:setRevealFormNewPage('js-wimsExerciceCreator')"></script>

</metal:content-core>

</body>

</html>