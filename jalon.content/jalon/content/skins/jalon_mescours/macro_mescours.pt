<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jalon.content">

<body>

<metal:content-core fill-slot="content-core">


<!--
        Liste des cours (version prof)
-->
<metal:macro define-macro="cours">

<tal:define define="categories context/getJalonCategories;
                    clefs python:context.getClefsDico(categories);
                    cle string:categorie;
                    default string:1;
                    categorie python:context.getSelectedTab(cle, default)">

    <tal:condition condition="not:is_ajax">

    <div id="reveal-main" class="reveal-modal medium" data-reveal="data-reveal" data-options="close_on_background_click: true;"></div>

    <main id="mes_cours" class="row" role="main" aria-labelledby="page_title">

        <metal:macro use-macro="here/macro_global_statusmessage/macros/portal_message">Message de session</metal:macro>

        <section class="show-for-medium-up medium-12 columns"
                 tal:define="is_manager python:user.has_role('Manager')">

            <nav id="item-adder"
                 tal:condition="not:is_manager">
                <a class="button expand create" data-reveal-id="reveal-main" data-reveal-ajax="true"
                   tal:attributes="href string:${context/absolute_url}/folder_form?macro=macro_mescours&amp;formulaire=ajout-cours">
                   <i class="fa fa-plus-circle"></i>
                   <tal:block i18n:translate="">Créer un cours</tal:block>
                </a>
            </nav>

            <nav id="item-adder"
                 tal:condition="is_manager">
                <ul class="button-group expand radius">
                    <li>
                        <a class="button create" data-reveal-id="reveal-main" data-reveal-ajax="true"
                           tal:attributes="href string:${context/absolute_url}/folder_form?macro=macro_mescours&amp;formulaire=ajout-cours">
                           <i class="fa fa-plus-circle"></i>
                           <tal:block i18n:translate="">Créer un cours</tal:block>
                        </a>
                    </li>
                    <li>
                        <a class="button"
                           tal:attributes="href string:${context/absolute_url}/lister_auteur">
                           <i class="fa fa-code-fork"></i>
                           <tal:block i18n:translate="">Dupliquer un cours</tal:block>
                        </a>
                    </li>
                </ul>
            </nav>

        </section>

        <section id="js-list-cours" class="small-12 columns"
                 tal:define="subject request/subject | nothing"
                 tal:condition="categorie">

            <h2 id="js-update_title">
                <i class="fa fa-briefcase"></i><tal:block i18n:translate="">Mes cours</tal:block>
                <tal:comments replace="nothing"><!--
                <<i class="fa fa-briefcase">tal:block i18n:translate="" tal:content="python:categories[int(categorie)]['title']"/>
                --></tal:comments>
            </h2>
            <span class="title-legend show-for-medium-up">
                <i class="fa fa-bell-o no-pad"></i> = <tal:block i18n:translate="">Nouveauté(s) depuis votre dernière connexion</tal:block>
            </span>

            <a tal:attributes="data-href string:${context/absolute_url}/?categorie=${categorie}&amp;subject=;
                               class python:context.test(subjects == 'favori', 'filter-button fixed_filter selected', 'filter-button fixed_filter unselected')">
               <i class="fa fa-circle no-pad"></i>
               <i class="fa fa-circle-thin no-pad"></i>
               <tal:block i18n:translate="">Favoris</tal:block>
            </a>

            <div id="js-update_target">
        <metal:macro use-macro="context/macro_mescours_liste/macros/mescours_liste">
            Macro d'affichage de la liste des cours
        </metal:macro>
            </div>

        </section>

    </main>

        <tal:block define="script string:setFavoritesFilter()">
            <tal:jsBuffer define="addJsContent python:jsBuffer.addJS(script)" />
            <tal:jsBuffer define="addExtraFile python:jsBuffer.addExtraFile('ckeditor/ckeditor')" />
        </tal:block>

    </tal:condition>

    <tal:condition condition="is_ajax">

        <metal:macro use-macro="context/macro_mescours_liste/macros/mescours_liste">
            Macro d'affichage de la liste des cours
        </metal:macro>

    </tal:condition>


</tal:define>

</metal:macro>


<!--
    Macro "info-etudiant" : réglages courriel
-->
<metal:macro define-macro="info-etudiant">

        <section class="medium-12 columns">
            <div class="panel callout radius"
                tal:define="bie context/getPropertiesBIE"
                tal:condition="bie/activer_bie"
                tal:content="structure bie/bie_message" />
        </section>

</metal:macro>


<!--
    Macro "cours-etudiant" : liste des cours (version étudiant)
-->
<metal:macro define-macro="cours-etudiant">
<tal:define define="categories context/getJalonCategories;
                    clefs python:context.getClefsDico(categories);
                    cle string:categorie;
                    default string:1;
                    categorie python:context.getSelectedTab(cle, default);
                    isMesCours python:context.test(categorie == '1', 1, 0);
                    isInscriptionMotDePasse python:context.test(categorie == '2', 1, 0)">

    <main class="row" role="main" aria-labelledby="page_title">

        <metal:macro use-macro="here/macro_global_statusmessage/macros/portal_message">Message de session</metal:macro>

        <div class="small-12 columns"
             tal:condition="python:context.getJalonProperty('annoncer_vider_cache')">

            <metal:macro use-macro="context/connexion/macros/vider-cache"></metal:macro>

            <tal:block define="script string:alterAlertBox()">
                <tal:jsBuffer define="addJsContent python:jsBuffer.addJS(script)" />
            </tal:block>

        </div>

        <section id="js-list-cours_etu" class="small-12 columns"
                 tal:condition="categorie">

    <tal:define define="diplomes python:context.getCours(categorie, user);
                        subject request/subject | nothing;">

        <div class="panel warning radius"
             tal:condition="not:diplomes"
             i18n:translate="">
            Vous n'êtes inscrit(e) à aucun diplôme.
        </div>

        <tal:block repeat="diplome diplomes">

            <h2 tal:condition="isMesCours">
                <i class="fa fa-university"></i><tal:block tal:content="diplome/libelle" />
            </h2>

            <h2 tal:condition="not:isMesCours">
                <i class="fa fa-university"></i>
                <tal:replace replace="python:categories[int(categorie)]['title']"></tal:replace>
            </h2>

            <span class="title-legend show-for-medium-up">
                <i class="fa fa-bell-o no-pad"></i> = <tal:block i18n:translate="">Nouveauté(s) depuis votre dernière connexion</tal:block>
            </span>

            <div class="panel warning radius"
                 tal:condition="not:diplome/listeCours">
                <tal:block tal:condition="isMesCours" i18n:translate="">Aucun cours n'est attaché à ce diplôme.</tal:block>
                <tal:block tal:condition="not:isMesCours" i18n:translate="">Aucun cours à inscription par mot de passe n'est disponible.</tal:block>
            </div>

            <table summary="Liste des cours"
                   tal:condition="diplome/listeCours">

                <thead>
                    <tr>
                        <th class="sort has-tip" data-tooltip data-sort="new" title="Trier selon les nouveautés" i18n:attributes="title">
                            <span>
                                <i class="fa fa-sort"></i>
                                <i class="fa fa-sort-asc"></i>
                                <i class="fa fa-sort-desc"></i>
                                <span class="fa fa-bell-o no-pad"></span>
                            </span>
                        </th>
                        <th class="sort text-left has-tip" data-sort="title" data-tooltip title="Trier selon le titre du cours" i18n:attributes="title">
                            <span>
                                <i class="fa fa-sort"></i>
                                <i class="fa fa-sort-asc"></i>
                                <i class="fa fa-sort-desc"></i>
                                <tal:block i18n:translate="">Titre du cours</tal:block>
                            </span>
                        </th>
                        <th class="sort text-left has-tip show-for-medium-up" data-sort="author" data-tooltip title="Trier selon l'auteur" i18n:attributes="title">
                            <span>
                                <i class="fa fa-sort"></i>
                                <i class="fa fa-sort-asc"></i>
                                <i class="fa fa-sort-desc"></i>
                                <tal:block i18n:translate="">Auteur</tal:block>
                            </span>
                        </th>
            <tal:comments replace="nothing"><!--
                        <th class="text-left show-for-medium-up"
                            tal:condition="isMesCours"
                            i18n:translate="">
                            Classement
                        </th>
                    </tr>
            --></tal:comments>
                </thead>
                <tbody class="list">

            <tal:entry repeat="cours diplome/listeCours">

                    <tr>
                        <td class="new"
                            tal:define="isNouveau python:context.isNouveau(cours['id'])">
                <tal:isNouveau condition="isNouveau">
                            <span class="hide"
                                  tal:content="cours/modified" />
                            <i class="fa fa-bell-o fa-fw no-pad"></i>
                </tal:isNouveau>
                <tal:isNotNouveau condition="not:isNouveau">
                            <span class="hide">Z<tal:replace replace="cours/modified"/></span>
                </tal:isNotNouveau>
                        </td>
                        <td class="title"
                            tal:condition="not:isInscriptionMotDePasse">
                            <span class="hide"
                                  tal:content="cours/title" />
                            <a title="Voir le cours"
                               tal:attributes="href cours/url"
                               tal:content="cours/title"
                               i18n:attributes="title" />
                            <span class="hide-for-medium-up">
                                <tal:block i18n:translate="">par</tal:block>
                                <tal:replace replace="cours/auteur"/>
                            </span>
                            <span class="show-for-medium-up"
                                  tal:condition="cours/description"
                                  tal:content="python:here.getShortText(cours['description'], 210)" />
                        </td>
                        <td class="title"
                            tal:condition="isInscriptionMotDePasse">
                            <span class="hide"
                                  tal:content="cours/title" />
                            <a title="S'inscrire au cours"
                               data-reveal-id="reveal-course_list" data-reveal-ajax="true"
                               tal:attributes="href string:${context/absolute_url}/folder_form?macro=macro_acces&amp;formulaire=inscription-cours&amp;idcours=${cours/id}&amp;createur=${cours/createur}&amp;auteur=${cours/idauteur}"
                               tal:content="cours/title"
                               i18n:attributes="title" />
                            <span class="show-for-medium-up"
                                  tal:condition="cours/description"
                                  tal:content="python:here.getShortText(cours['description'], 210)" />
                        </td>
                        <td class="author show-for-medium-up">
                            <span class="hide" tal:content="cours/auteur" />
                            <a title="Contacter l'auteur"
                               tal:attributes="href string:mailto:${cours/email}"
                               tal:content="cours/auteur" />
                        </td>
            <tal:comments replace="nothing"><!--
                        <td class="class show-for-medium-up"
                            tal:condition="isMesCours">
                            <ul>
                <tal:block repeat="acces cours/acces">
                                <li tal:content="acces" />
                </tal:block>
                            </ul>
                        </td>
            --></tal:comments>
                    </tr>

            </tal:entry>

                </tbody>
            </table>
        </tal:block>
    </tal:define>

            <div id="reveal-course_list" class="reveal-modal medium" data-reveal="data-reveal" data-options="close_on_background_click: true;"></div>

        </section>

        <section class="medium-12 columns"
                 tal:define="messages context/getPropertiesMessages;
                             activer_guide_anti_spam python:context.getJalonProperty('activer_guide_anti_spam')"
                             tal:condition="python:messages['activer_message_general'] | messages['activer_bie'] | activer_guide_anti_spam">

            <div class="panel warning radius"
                 tal:condition="messages/activer_message_general"
                 tal:content="structure messages/message_general" />
            <div class="panel callout radius"
                 tal:condition="messages/activer_bie"
                 tal:content="structure messages/bie_message" />
            <div class="panel callout radius"
                 tal:condition="activer_guide_anti_spam"
                 tal:content="structure python:context.getJalonProperty('message_guide_anti_spam')" />
        </section>

    <tal:comment replace="nothing"><!--
    <metal:macro use-macro="context/macro_mescours/macros/info-etudiant">
        Message d'information
    </metal:macro>
    --></tal:comment>

    </main>

    <tal:block define="script string:setSortableList('js-list-cours_etu',['new','title','author'],'new','desc')">
        <tal:jsBuffer define="addJsContent python:jsBuffer.addJS(script)" />
    </tal:block>

</tal:define>
</metal:macro>


<!--
    Macro "cours-etudiant" : liste des cours (version étudiant extérieur)

<metal:macro define-macro="cours-etudiant-jalon">
    <tal:define define="categories context/getJalonCategories;
                        clefs python:context.getClefsDico(categories);
                        cle string:categorie;
                        default string:1;
                        categorie python:context.getSelectedTab(cle, default);
                        isMesCours python:context.test(categorie == '1', 1, 0);
                        isInscriptionMotDePasse python:context.test(categorie == '2', 1, 0)">
        <div class="mescours_etudiants">
            <h2 class="texte_icone icone_user"><span i18n:translate="">Bonjour</span> <span tal:content="python:context.getInfosMembre(user.getId())['fullname']"/></h2>

            <div id="support_ajout">
                <ul class="arrondis onglets">
                    <tal:block repeat="clef clefs">
                    <li tal:define="cat python:int(categorie)"
                        tal:attributes="class python:context.test(clef == cat, 'arrondi categorie selected', 'arrondi categorie')">
                        <a tal:attributes="href string:.?categorie=${clef}"
                           tal:content="python:categories[clef]['title']"
                           i18n:translate="">
                            Catégorie
                        </a>
                    </li>
                    </tal:block>
                </ul>
            </div>

            <div id="tableauAjout" class="onglets_contenu">
                <div id="tableau"
                     tal:condition="categorie">
                    <tal:define define="diplomes python:context.getCoursEtudiantJalon(categorie)">
                    <tal:block repeat="diplome diplomes">
                        <tal:condition condition="isMesCours">
                            <h2 tal:content="diplome/libelle" class="texte_icone icone_universite"/>
                        </tal:condition>
                        <tal:block condition="not:diplome/listeCours">
                            <div class="listing_vide" i18n:translate="">Aucun élément</div>
                        </tal:block>

                        <table class="listing"
                                tal:condition="diplome/listeCours">
                        <thead>
                        <tr>
                            <th i18n:translate=""></th>
                            <th title="Cliquer pour trier selon l'auteur" i18n:attributes="title" i18n:translate="">Auteur</th>
                            <th title="Cliquer pour trier selon le nom du cours" i18n:attributes="title" i18n:translate="">Cours</th>
                            <th title="Cliquer pour trier selon le classement" i18n:attributes="title" i18n:translate=""
                                tal:condition="isMesCours">Classement</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tal:entry repeat="cours diplome/listeCours">
                        <tr tal:define="oddrow repeat/cours/odd"
                            tal:attributes="class python:context.test(oddrow, 'even', 'odd')">
                            <td class="tdcenter"
                                tal:define="isNouveau python:context.isNouveau(cours['id'])">
                                <span tal:condition="isNouveau" class="nouveau texte_icone icone_soleil"></span>
                            </td>
                            <td tal:content="cours/auteur"/>
                            <td tal:condition="not:isInscriptionMotDePasse">
                              <a tal:attributes="href cours/url"
                                 title="Voir le cours"
                                 i18n:attributes="title"
                                 tal:content="cours/title"/>
                            </td>
                            <td tal:condition="isInscriptionMotDePasse">
                              <a title="S'inscrire au cours" class="showmore"
                                 tal:attributes="href string:${context/absolute_url}/folder_form?macro=macro_acces&amp;formulaire=inscription-cours&amp;idcours=${cours/id}&amp;auteur=${cours/idauteur}"
                                 i18n:attributes="title"
                                 tal:content="cours/title"/>
                            </td>
                            <td tal:condition="isMesCours">
                               <ul>
                                  <tal:block repeat="acces cours/acces">
                                    <li tal:content="acces"/>
                                  </tal:block>
                               </ul>
                            </td>
                        </tr>
                        </tal:entry>
                        </tbody>
                        </table>
                    </tal:block>
                    </tal:define>
                </div>
            </div>
            <metal:macro use-macro="context/macro_mescours/macros/info-etudiant">
                Message d'information
            </metal:macro>
        </div>
    </tal:define>
</metal:macro>
-->


<!--

        Création d'un nouveau cours


-->
<metal:macro define-macro="ajout-cours">

    <h2><tal:block i18n:translate="">Créer un cours</tal:block>
        <a class="close-reveal-modal"></a>
    </h2>

    <form id="js-courseCreator" method="POST"
          tal:attributes="action python:context.absolute_url()+'/'+template.id;
                          data-success_msg_pre string:Le cours;
                          data-success_msg_post string:a été créé."
          i18n:attributes="data-success_msg_pre; data-success_msg_post">

        <div id="archetypes-fieldname-title"
                tal:define="error errors/title | nothing;
                            arch_class string:field ArchetypesStringWidget;"
                tal:attributes="class python:context.test(error, 'error %s' % arch_class, arch_class)">

            <label for="title" i18n:translate="">Titre</label>
            <div class="fieldErrorBox"
                   tal:condition="error"
                   tal:content="error" />
            <input type="text" id="title" name="title" maxlength="255" size="30"
                   tal:attributes="value request/title | nothing"
                   placeholder="Saisie obligatoire" i18n:attributes="placeholder"
                   required="required" />
        </div>

        <div id="archetypes-fieldname-description"
             tal:define="error errors/description | nothing;
                         arch_class string:field ArchetypesStringWidget;"
             tal:attributes="class python:context.test(error, 'error %s' % arch_class, arch_class)">
              <label for="description" i18n:translate="">Description</label>
              <div class="fieldErrorBox"
                   tal:condition="error"
                   tal:content="error" />
              <textarea id="description" name="description" rows="7"><tal:block replace="request/description | nothing"/></textarea>
        </div>

        <input type="hidden" name="page" tal:attributes="value string:${context/absolute_url}" />
        <input type="hidden" name="form.submitted" value="1" />
        <input type="hidden" name="authMember" tal:attributes="value user/getId" />
        <input type="hidden" name="macro" value="macro_mescours" />
        <input type="hidden" name="formulaire" value="ajout-cours" />

        <div class="formControls">
            <button type="submit" class="button small create">
                <i class="fa fa-check-circle"></i>
                <tal:block i18n:translate="">Créer</tal:block>
            </button>
        </div>

    </form>

    <script charset="UTF-8"
            tal:content="structure string:setRevealForm('js-courseCreator','reveal-main','description')" />

</metal:macro>


<!--
        Duplication d'un cours
-->
<metal:macro define-macro="dupliquer">

    <tal:define define="course_name python:context.aq_parent.getShortText(context.Title())">

    <h2><tal:block i18n:translate="">Dupliquer le cours</tal:block>
        « <tal:block replace="course_name"/> »
        <a class="close-reveal-modal"></a>
    </h2>

    <div class="panel callout radius">
        <tal:block i18n:translate="">Dupliquer un cours crée un nouveau cours avec le même nom suivi de l'indication</tal:block> « <strong>Duplicata</strong> ».<br />
        <tal:block i18n:translate="">Le duplicata contient tous les éléments du cours à l'exception des dépôts des étudiants (dans les boîtes de dépôt) et des notes d'auto-évaluations et d'examens WIMS.</tal:block>
    </div>

    <form id="js-courseDuplicator" method="POST"
          tal:define="manager request/manager | nothing"
          tal:attributes="action context/aq_parent/absolute_url;
                          data-course_name course_name;
                          data-success_msg_pre string:Le cours;
                          data-success_msg_post string:a été dupliqué."
          i18n:attributes="data-success_msg_pre; data-success_msg_post">

        <input type="hidden" name="dupliquer_cours:method" value="Dupliquer" />
        <input type="hidden" name="idcours" tal:attributes="value context/getId" />
        <input type="hidden" name="creator" tal:attributes="value context/Creator" />

        <tal:condition condition="not:manager">
            <input type="hidden" name="manager" value="" />
            <input type="hidden" name="orig_template"
                   tal:attributes="value context/aq_parent/absolute_url" />
        </tal:condition>

        <tal:condition condition="manager">
            <input type="hidden" name="manager"
                   tal:attributes="value user/getId" />
            <input type="hidden" name="orig_template"
                   tal:attributes="value string:${context/aq_parent/aq_parent/absolute_url}/${user/getId}" />
        </tal:condition>

        <div class="formControls">
            <button type="submit" class="button small">
                <i class="fa fa-code-fork"></i>
                <tal:block i18n:translate="">Dupliquer</tal:block>
            </button>
        </div>

    </form>

    </tal:define>

    <script charset="UTF-8"
            tal:content="structure string:setCourseDuplicator()">
    </script>

</metal:macro>


<!--

        Purge d'un cours


-->
<metal:macro define-macro="purger">

    <h2>
        <tal:block i18n:translate="">Purger le cours</tal:block>
        « <tal:block replace="python:context.aq_parent.getShortText(context.Title())"/> »
        <a class="close-reveal-modal"></a>
    </h2>

    <div class="panel radius">
        <tal:block i18n:translate="">Ceci supprimera tous les travaux réalisés par les étudiants dans les activités de ce cours (en laissant ces dernières intactes et attachées au cours). Ceci permet de réinitialiser le cours lors d'un changement d'année scolaire, par exemple.</tal:block>
    </div>

    <div class="panel alert radius">
        <strong i18n:translate="">Attention :</strong>
        <tal:block i18n:translate="">cette opération est définitive.</tal:block><br />
        <strong i18n:translate="">Assurez-vous d'avoir téléchargé une copie des travaux des étudiants avant de continuer.</strong><br />
    </div>

    <div class="panel callout radius">
        <i class="fa fa-info-circle no-pad"></i>
        <tal:block i18n:translate="">Cette opération peut prendre quelques minutes, merci de patienter.</tal:block>
    </div>

    <form tal:attributes="action context/absolute_url"
          method="POST">

        <input type="hidden" name="purger_activites:method" value="Purger" />
        <input type="hidden" name="came_from" tal:attributes="value request/came_from | string:mes_cours" />

        <div class="formControls">
            <button type="submit" class="button small warning">
                <i class="fa fa-filter"></i>
                <tal:block i18n:translate="">Purger le cours</tal:block>
            </button>
        </div>
    </form>

</metal:macro>


<!--

        Suppression de toutes les activités WIMS d'un cours


-->
<metal:macro define-macro="suppr_WIMS"
             tal:define="listeClasses context/getListeClasses;
                         personnel python:context.isPersonnel(user);
                         user_ID user/getId;
                         isAuteurs python:context.isAuteurs(user_ID);
                         isAuteur python:context.isAuteur(user_ID)">

    <h2>
        <tal:block i18n:translate="">Supprimer les activités WIMS du cours</tal:block>
        « <tal:block replace="python:context.aq_parent.getShortText(context.Title())"/> »
        <a class="close-reveal-modal"></a>
    </h2>

<tal:isPersonnel condition="personnel">

    <div class="panel callout radius">
        <i class="fa fa-info-circle no-pad"></i>
        <tal:block i18n:translate="">Vous l'aurez certainement remarqué : il est impossible (pour des raisons techniques) de supprimer de manière individuelle une activité WIMS (autoévaluation ou examen). Cette fonction permet toutefois de supprimer toutes les autoévaluations et examens WIMS de ce cours.</tal:block>
    </div>

    <tal:isClasses condition="listeClasses">
        <tal:define define="has_classes python:user_ID in listeClasses[0]">
        <tal:can_delete condition="python:isAuteur or has_classes">

    <form id="js-supprActWIMS-form" method="POST"
          tal:attributes="action string:${context/absolute_url}/supprimer_WIMS">

        <div class="panel radius">
            <span i18n:translate="">Supprimer toutes les activités Wims créées par :</span>
                <ul tal:repeat="infos_classe listeClasses">
                    <li tal:attributes="class python:context.test(isAuteur, '', 'disabled')">
                        <input type="radio" name="utilisateur" id="utilisateur_All" value="All"
                               tal:attributes="disabled python:context.test(isAuteur, '', 'disabled')"/>
                        <label for="utilisateur_All"><i class="fa fa-users fa-fw"></i>Tous les auteurs</label>
                        <div class="formHelp texte_icone icone_information"
                             style="margin-left:4.5em;"
                             tal:condition="isAuteur">Le cours ne contiendra plus aucune autoévaluation ni examen WIMS.</div>
                    </li>
                    <tal:repeat repeat="auteur infos_classe">
                        <li tal:attributes="class python:context.test(isAuteur or auteur==user_ID, '', 'disabled')">
                            <input type="radio" name="utilisateur"
                                   tal:attributes="value auteur;
                                                   id string:utilisateur_${auteur};
                                                   checked python:context.test(auteur==user_ID, 'checked', '');
                                                   disabled python:context.test(isAuteur or auteur==user_ID, '', 'disabled')"/>

                            <label tal:attributes="for string:utilisateur_${auteur}">
                                <i class="fa fa-user fa-fw"></i><span tal:content="python:context.getInfosMembre(auteur)['fullname']"/>
                                <span tal:condition="python:auteur==user_ID">(moi)</span>
                            </label>
                        </li>
                    </tal:repeat>
                </ul>
                <div class="texte_icone icone_information"
                     tal:condition="not:isAuteur">Seul l'auteur du cours peut supprimer les activités de ses coauteurs.</div>
        </div>

        <tal:comment replace="nothing"><!--
            <tal:block condition="python:len(listeClasses[0])<=1">
                <input type="hidden" name="utilisateur" tal:attributes="value user/getId" />
                <div class="text-center">
                    <input id="suppr_WIMS"
                           type="checkbox"
                           onclick="javacript:EnableDisableButton(this,'js-suppr_act_WIMS');"
                           /><label for="suppr_WIMS">Je confirme vouloir supprimer toutes mes activités WIMS de ce cours.</label>
                    <div class="formHelp texte_icone icone_information">Le cours ne contiendra plus aucune autoévaluation ni examen WIMS.</div>
                </div>
            </tal:block>
        --></tal:comment>

        <input type="hidden" name="came_from" tal:attributes="value request/came_from | string:mes_cours" />

        <div class="panel alert radius">
            <strong i18n:translate=""><i class="fa fa-exclamation-triangle no-pad alert"></i> Attention :</strong>
            <tal:block i18n:translate="">la suppression est définitive. Si vous ne souhaitez retirer que les notes, annulez et cliquez plutôt sur "Purger".</tal:block><br />
            <tal:block i18n:translate="">Assurez-vous d'avoir au moins téléchargé une copie des notes des étudiants avant de continuer.</tal:block>
        </div>

        <div class="formControls">

            <label for="confirm-suppr_WIMS">
                <input id="confirm-suppr_WIMS" type="checkbox" style="margin-bottom:0";/>
                <tal:block i18n:translate="">Je confirme vouloir <u>supprimer</u> toutes les activités WIMS créées par le ou les auteurs selectionné(s).</tal:block>
            </label>

            <button class="button small alert" type="submit" disabled="true">
                <i class="fa fa-trash-o"></i>
                <tal:block i18n:translate="">Tout supprimer</tal:block>
            </button>

        </div>

        <div class="panel callout radius hide">
            <i class="fa fa-refresh fa-spin"></i>
            <tal:block i18n:translate="">Merci de patienter. Cette opération peut prendre quelques minutes…</tal:block>
        </div>

    </form>

    <script charset="UTF-8"
            tal:content="structure string:enableSubmitButtonIfCheckboxTicked('js-supprActWIMS-form')" />

    <script charset="UTF-8"
            tal:content="structure string:displayMessageOnSubmit('js-supprActWIMS-form')" />

        </tal:can_delete>

        <tal:cannot_delete condition="python:not(isAuteur or has_classes)">

    <div class="panel alert radius"
         tal:define="baseAnnuaire context/getBaseAnnuaire">
        <i class="fa fa-exclamation-triangle no-pad"></i>
        Vous n'êtes pas l'auteur de ce cours et vous ne pouvez pas supprimer les activités WIMS réalisées par les co-auteurs. Contactez l'auteur de ce cours
        (<a tal:define="auteurPrincipal context/getAuteur"
            tal:attributes="href python:context.getFicheAnnuaire(auteurPrincipal, baseAnnuaire)" target="_blank"
            tal:content="auteurPrincipal/fullname" />)
        pour lui demander de le faire.
    </div>

        </tal:cannot_delete>
        </tal:define>
    </tal:isClasses>

    <div class="panel warning radius"
         tal:condition="not:listeClasses">
        <i class="fa fa-exclamation-triangle no-pad"></i>
        <tal:block i18n:translate="">Ce cours ne contient actuellement aucune activité WIMS : il n'y a donc rien à supprimer. N'hésitez-pas à contacter</tal:block>
        <a href="mailto:pi@unice.fr?subject=[Jalon] Suppression d'activité WIMS" i18n:translate="">l'administrateur</a>
        <tal:block i18n:translate="">si vous pensez que ce n'est pas le cas.</tal:block>
    </div>

</tal:isPersonnel>

<tal:isNotPersonnel condition="not:personnel">

    <div class="panel alert radius">
        <i class="fa fa-exclamation-triangle no-pad"></i>
        <tal:block i18n:translate="">Seuls les enseignants ont accès à cette fonction.</tal:block>
    </div>

</tal:isNotPersonnel>

</metal:macro>


</metal:content-core>
</body>
</html>